---
import FormSteps from "../components/react/FormSteps";
import MainLayout from "../layouts/MainLayout.astro";
import { type FormStep } from "../resources/types/form-step";
import { decrypt } from "../resources/utils/crypto";
const token = Astro.url.searchParams.get("token")! || "";
console.log(token);

const decryptData = decrypt(token, import.meta.env.SECRET_KEY);

const data = decryptData ? JSON.parse(decryptData) : {};

console.log(data)

const step = data.step ?? 0;

const steps: FormStep[] = [
  {
    question: "¿Cuál es el nombre del cumpleañer@?",
    answer: "",
    input: {
      name: "names",
      placeholder: "Nombre de la persona",
    }
  },
  {
    question: "¿Qué color le gusta?",
    answer: "",
    input: {
      name: "color",
      placeholder: "Color"
    }
  },
];
---

<MainLayout>
  <FormSteps client:load step={step} steps={steps} token={token} />
</MainLayout>
